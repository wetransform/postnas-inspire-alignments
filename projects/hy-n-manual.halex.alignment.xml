<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<alignment xmlns="http://www.esdi-humboldt.eu/hale/alignment">
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.geometry.simplefeature" name="Simple Feature Geometrie" type="groovy">
            <cf:input eager="true" maxOccurs="1" minOccurs="1" name="geometrie"/>
            <cf:output eager="false" maxOccurs="1" minOccurs="1"/>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def geoms = _.geom.toSimpleGeometries(geometries: _.geom.aggregate(geometrie), collections: false)
if (geoms) {
	if (geoms.size() &gt; 1) {
		_log.error("Mehrere Geometrien gefunden - Aufteilung nötig")
	}
	_target(geoms[0])
}
else {
	_log.error("Keine Geometrie gefunden")
}
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
Überführt die Quell-Geometrien als eine zusammengefasste Simple Feature Geometrie (ohne Multi-Geometrien).

Nur erfolgreich falls genau eine Simple Feature Geometrie gebildet werden kann. Andernfalls wird ein entsprechender Fehler in die Transformations-Logs eingetragen.
</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.geometry.simplefeature.multi" name="Simple Feature Geometrie (Multi)" type="groovy">
            <cf:input eager="true" maxOccurs="1" minOccurs="1" name="geometrie"/>
            <cf:output eager="false" maxOccurs="1" minOccurs="1"/>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def geoms = _.geom.toSimpleGeometries(geometries: _.geom.aggregate(geometrie), collections: true)
if (geoms) {
	if (geoms.size() &gt; 1) {
		_log.error("Mehrere Geometrien gefunden - Aufteilung nötig")
	}
	_target(geoms[0])
}
else {
	_log.error("Keine Geometrie gefunden")
}
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
Überführt die Quell-Geometrien als eine zusammengefasste Simple Feature Geometrie (ggf. als Multi-Geometrie).

Nur erfolgreich falls genau eine Simple Feature Geometrie gebildet werden kann. Andernfalls wird ein entsprechender Fehler in die Transformations-Logs eingetragen.
</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.inspire.AX_Lagebezeichnung.GeographicalName" name="AX_Lagebezeichnung zu GeographicalName" type="groovy">
            <cf:input eager="false" maxOccurs="1" minOccurs="1" name="lagebezeichnung">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:input eager="false" maxOccurs="1" minOccurs="0" name="source">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:output eager="false" maxOccurs="1" minOccurs="1">
                <cf:type name="GeographicalNameType" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </cf:output>
            <cf:param maxOccurs="1" minOccurs="0" name="source">
                <cf:description>
                    <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Quelle des Namens. Falls nicht angegeben wird sie aus einer Projekt-Variable bestimmt.</core:text>
                </cf:description>
                <cf:display value="Source of name"/>
                <cf:binding>java.lang.String</cf:binding>
            </cf:param>
            <cf:param maxOccurs="1" minOccurs="0" name="nameStatus">
                <cf:description>
                    <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Status des Namens. Falls nicht angegeben wird als Standardwert official angenommen.</core:text>
                </cf:description>
                <cf:display value="nameStatus"/>
                <cf:value>standardised</cf:value>
                <cf:value>other</cf:value>
                <cf:value>official</cf:value>
                <cf:value>historical</cf:value>
                <cf:value>unpopulated</cf:value>
                <cf:value>unknown</cf:value>
            </cf:param>
            <cf:param maxOccurs="1" minOccurs="0" name="nativeness">
                <cf:description>
                    <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Ortsüblichkeit des Namens. Falls nicht angegeben wird als Standardwert endonym angenommen.</core:text>
                </cf:description>
                <cf:display value="nativeness"/>
                <cf:value>endonym</cf:value>
                <cf:value>unpopulated</cf:value>
                <cf:value>exonym</cf:value>
                <cf:value>unknown</cf:value>
            </cf:param>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def name = lagebezeichnung.p.unverschluesselt.value()

if (!name) {
	// Namen auch aus verschlüsselter Lagebezeichnung ableiten
	
	def gemeinde = lagebezeichnung.p.verschluesselt.AX_VerschluesselteLagebezeichnung.gemeinde.value()
	def kreis = lagebezeichnung.p.verschluesselt.AX_VerschluesselteLagebezeichnung.kreis.value()
	def lage = lagebezeichnung.p.verschluesselt.AX_VerschluesselteLagebezeichnung.lage.value()
	def land = lagebezeichnung.p.verschluesselt.AX_VerschluesselteLagebezeichnung.land.value()
	def reg = lagebezeichnung.p.verschluesselt.AX_VerschluesselteLagebezeichnung.regierungsbezirk.value()

	if (land &amp;&amp; gemeinde &amp;&amp; kreis &amp;&amp; lage) {
		if (!reg) reg = '0'
		def schluesselGesamt = "$land$reg$kreis$gemeinde$lage"
		
		withTransformationContext {
			def collect = _.context.collector(it)
	  
			// Name zu Schlüssel der Lagebezeichnung aus Index holen
			if (collect.lagebezeichnung[schluesselGesamt].value()){
				name = collect.lagebezeichnung[schluesselGesamt].value()
			}
			else _log.error("Für einen Namen aus einer verschlüsselten Lagebezeichnung mit Schlüssel ${schluesselGesamt} liegt kein Katalogeintrag vor.")
		}
	}
}

if (name) {
	def sourceName_var = _project.vars.get('ADV_MODELLART', null)

	_target {
		// source

		// Priorität 1 - feste Quelle
		if (_params.source) {
			sourceOfName( _params.source )
		}
		// Priorität 2 - aus Projektvariable
		else if (sourceName_var) {
			sourceOfName( sourceName_var )
		}
		else {
			sourceOfName {
				nilReason( 'unknown' )
			}
		}

		// nativeness
		def nn = _params.nativeness
		if (nn) {
			if (nn == 'unpopulated') {
				nativeness {
					nilReason( 'other:unpopulated' )
				}
			}
			else if (nn == 'unknown') {
				nativeness {
					nilReason( 'unknown' )
				}
			}
			else {
				nativeness {
					href( 'http://inspire.ec.europa.eu/codelist/NativenessValue/' + nn )
				}
			}
		}
		else {
			// default for nativeness if not specified is endonym
			nativeness {
				href( 'http://inspire.ec.europa.eu/codelist/NativenessValue/endonym' )
			}
		}

		// nameStatus
		def ns = _params.nameStatus
		if (ns) {
			if (ns == 'unpopulated') {
				nameStatus {
					nilReason( 'other:unpopulated' )
				}
			}
			else if (ns == 'unknown') {
				nameStatus {
					nilReason( 'unknown' )
				}
			}
			else {
				nameStatus {
					href( 'http://inspire.ec.europa.eu/codelist/NameStatusValue/' + ns )
				}
			}
		}
		else {
			// default for nameStatus if not specified is official
			nameStatus {
				href( 'http://inspire.ec.europa.eu/codelist/NameStatusValue/official' )
			}
		}

		// spelling
		spelling {
			SpellingOfName {
				text( name )
				script( 'Latn' )
			}
		}
		// language
		language( 'deu' )
	}
}
else {
	throw new NoResultException()
}
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
Erstellt ein GeographicalName-Objekt aus einer Lagebezeichnung.&#13;
Eine unverschlüsselte Lagebezeichnung wird direkt als Name übernommen.&#13;
Falls stattdessen eine verschlüsselte Lagebezeichnung vorliegt (nur in ALKIS/DLKM möglich), wird versucht den Namen über den Schlüssel in einem Index nachzuschlagen.&#13;
Trifft keiner der beiden Fälle zu, oder kann der Name nicht nachgeschlagen werden, wird kein GeographicalName erzeugt.&#13;
&#13;
Die Sprache des Namens wird als Deutsch angenommen.&#13;
&#13;
&lt;% if (_params.nameStatus) {&#13;
  if (_params.nameStatus == 'unpopulated') {&#13;
    out &lt;&lt; "Der Status des Namens (`nameStatus`) wird nicht angegeben, als *nilReason* wird `other:unpopulated` angegeben."&#13;
  }&#13;
  else if (_params.nameStatus == 'unknown') {&#13;
    out &lt;&lt; "Der Status des Namens (`nameStatus`) wird nicht angegeben, als *nilReason* wird `unknown` angegeben."&#13;
  }&#13;
  else {&#13;
    out &lt;&lt; "Der Status des Namens (`nameStatus`) wird als ${_params.nameStatus} angegeben (siehe &lt;http://inspire.ec.europa.eu/codelist/NameStatusValue&gt;)."&#13;
  }&#13;
}&#13;
else {&#13;
  out &lt;&lt; "Der Status des Namens (`nameStatus`) wird als *official* angegeben (siehe &lt;http://inspire.ec.europa.eu/codelist/NameStatusValue&gt;)."&#13;
}&#13;
out &lt;&lt; "\n\n"&#13;
if (_params.nativeness) {&#13;
  if (_params.nativeness == 'unpopulated') {&#13;
    out &lt;&lt; "Die Ortsüblichkeit (`nativeness`) wird nicht angegeben, als *nilReason* wird `other:unpopulated` angegeben."&#13;
  }&#13;
  else if (_params.nativeness == 'unknown') {&#13;
    out &lt;&lt; "Die Ortsüblichkeit (`nativeness`) wird nicht angegeben, als *nilReason* wird `unknown` angegeben."&#13;
  }&#13;
  else {&#13;
    out &lt;&lt; "Die Ortsüblichkeit (`nativeness`) wird als ${_params.nativeness} angegeben (siehe &lt;http://inspire.ec.europa.eu/codelist/NativenessValue&gt;)."&#13;
  }&#13;
}&#13;
else {&#13;
  out &lt;&lt; "Die Ortsüblichkeit (`nativeness`) wird als *endonym* angegeben (siehe &lt;http://inspire.ec.europa.eu/codelist/NativenessValue&gt;)."&#13;
}&#13;
out &lt;&lt; "\n\n"&#13;
if (_params.source) {&#13;&#13;
  out &lt;&lt; "Die Quelle des Namens (`sourceOfName`) wird als ${_params.source} angegeben."&#13;&#13;
} else {&#13;&#13;
  out &lt;&lt; "Die Quelle des Namens (`sourceOfName`) wird aus einer Projekt-Variable (`ADV_MODELLART`) bestimmt, falls vorhanden."&#13;&#13;
} %&gt;
</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.inspire.GeographicalName.simple" name="Einfacher GeographicalName (Deutsch)" type="groovy">
            <cf:input eager="false" maxOccurs="1" minOccurs="1" name="spelling">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:input eager="true" maxOccurs="1" minOccurs="0" name="source">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:output eager="false" maxOccurs="1" minOccurs="1">
                <cf:type name="GeographicalNameType" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </cf:output>
            <cf:param maxOccurs="1" minOccurs="0" name="source">
                <cf:description>
                    <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Quelle des Namens. Falls nicht angegeben wird sie aus einer Projekt-Variable oder, falls konfiguriert, aus dem Quell-Objekt bestimmt.</core:text>
                </cf:description>
                <cf:display value="Source of name"/>
                <cf:binding>java.lang.String</cf:binding>
            </cf:param>
            <cf:param maxOccurs="1" minOccurs="0" name="nameStatus">
                <cf:description>
                    <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Status des Namens. Falls nicht angegeben wird als Standardwert official angenommen.</core:text>
                </cf:description>
                <cf:display value="nameStatus"/>
                <cf:value>standardised</cf:value>
                <cf:value>other</cf:value>
                <cf:value>official</cf:value>
                <cf:value>historical</cf:value>
                <cf:value>unpopulated</cf:value>
                <cf:value>unknown</cf:value>
            </cf:param>
            <cf:param maxOccurs="1" minOccurs="0" name="nativeness">
                <cf:description>
                    <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Ortsüblichkeit des Namens. Falls nicht angegeben wird als Standardwert endonym angenommen.</core:text>
                </cf:description>
                <cf:display value="nativeness"/>
                <cf:value>endonym</cf:value>
                <cf:value>unpopulated</cf:value>
                <cf:value>exonym</cf:value>
                <cf:value>unknown</cf:value>
            </cf:param>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def sourceNameFromModellart() {
	if (source) {
		def modelle = source.p.AA_Modellart.advStandardModell.values()
		if (modelle) {
			//TODO Logik um korrektes anzugebendes Modell zu bestimmen?
			//XXX Vorerst wird erstes Modell zurückgegeben
			return modelle[0]
		}
	}
	
	null
}

def sourceName_input = sourceNameFromModellart()
def sourceName_var = _project.vars.get('ADV_MODELLART', null)

if (spelling) {
	_target {
		
		// Priorität 1 - feste Quelle
		if (_params.source) {
			sourceOfName( _params.source )
		}
		// Priorität 2 - aus Projektvariable
		else if (sourceName_var) {
			sourceOfName( sourceName_var )
		}
		// Priorität 3 - aus Quell-Objekt
		else if (sourceName_input) {
			sourceOfName( sourceName_input )
		}
		else {
			sourceOfName {
				nilReason( 'unknown' )
			}
		}
		pronunciation {
			nilReason( 'other:unpopulated' )
		}
		// nameStatus
		def ns = _params.nameStatus
		if (ns) {
			if (ns == 'unpopulated') {
				nameStatus {
					nilReason( 'other:unpopulated' )
				}
			}
			else if (ns == 'unknown') {
				nameStatus {
					nilReason( 'unknown' )
				}
			}
			else {
				nameStatus {
					href( 'http://inspire.ec.europa.eu/codelist/NameStatusValue/' + ns )
				}
			}
		}
		else {
			// default for nameStatus if not specified is official
			nameStatus {
				href( 'http://inspire.ec.europa.eu/codelist/NameStatusValue/official' )
			}
		}
		// nativeness
		def nn = _params.nativeness
		if (nn) {
			if (nn == 'unpopulated') {
				nativeness {
					nilReason( 'other:unpopulated' )
				}
			}
			else if (nn == 'unknown') {
				nativeness {
					nilReason( 'unknown' )
				}
			}
			else {
				nativeness {
					href( 'http://inspire.ec.europa.eu/codelist/NativenessValue/' + nn )
				}
			}
		}
		else {
			// default for nativeness if not specified is endonym
			nativeness {
				href( 'http://inspire.ec.europa.eu/codelist/NativenessValue/endonym' )
			}
		}
		spelling {
			SpellingOfName {
				text( spelling )
				script ( 'Latn' )
			}
		}
		language( 'deu' )
	}
}
else {
	throw new NoResultException()
}
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
Bildet ein GeographicalName-Objekt zu einem einfachen Namen. Der Wert des Quell-Attributs $spelling wird als Schreibweise des Namens übernommen (`SpellingOfName`).&#13;
&#13;
Die Sprache wird als Deutsch angenommen.&#13;

&lt;% if (_params.nameStatus) {
  if (_params.nameStatus == 'unpopulated') {
    out &lt;&lt; "Der Status des Namens (`nameStatus`) wird nicht angegeben, als *nilReason* wird `other:unpopulated` angegeben."
  }
  else if (_params.nameStatus == 'unknown') {
    out &lt;&lt; "Der Status des Namens (`nameStatus`) wird nicht angegeben, als *nilReason* wird `unknown` angegeben."
  }
  else {
    out &lt;&lt; "Der Status des Namens (`nameStatus`) wird als ${_params.nameStatus} angegeben (siehe &lt;http://inspire.ec.europa.eu/codelist/NameStatusValue&gt;)."
  }
}
else {
  out &lt;&lt; "Der Status des Namens (`nameStatus`) wird als *official* angegeben (siehe &lt;http://inspire.ec.europa.eu/codelist/NameStatusValue&gt;)."
}
out &lt;&lt; "\n\n"
if (_params.nativeness) {
  if (_params.nativeness == 'unpopulated') {
    out &lt;&lt; "Die Ortsüblichkeit (`nativeness`) wird nicht angegeben, als *nilReason* wird `other:unpopulated` angegeben."
  }
  else if (_params.nativeness == 'unknown') {
    out &lt;&lt; "Die Ortsüblichkeit (`nativeness`) wird nicht angegeben, als *nilReason* wird `unknown` angegeben."
  }
  else {
    out &lt;&lt; "Die Ortsüblichkeit (`nativeness`) wird als ${_params.nativeness} angegeben (siehe &lt;http://inspire.ec.europa.eu/codelist/NativenessValue&gt;)."
  }
}
else {
  out &lt;&lt; "Die Ortsüblichkeit (`nativeness`) wird als *endonym* angegeben (siehe &lt;http://inspire.ec.europa.eu/codelist/NativenessValue&gt;)."
}
out &lt;&lt; "\n\n"
if (_params.source) {&#13;
  out &lt;&lt; "Die Quelle des Namens (`sourceOfName`) wird als ${_params.source} angegeben."&#13;
} else if (source) {&#13;
  out &lt;&lt; "Die Quelle des Namens (`sourceOfName`) wird aus einer Projekt-Variable (`ADV_MODELLART`) bestimmt, falls vorhanden, andernfalls wird das Quell-Attribut $source dafür herangezogen. "&#13;
  out &lt;&lt; "In letzterem Fall kann nur eine von potentiell mehreren im Quellobjekt angegebenen Modellarten übernommen werden."&#13;
} else {&#13;
  out &lt;&lt; "Die Quelle des Namens (`sourceOfName`) wird aus einer Projekt-Variable (`ADV_MODELLART`) bestimmt, falls vorhanden."&#13;
} %&gt;
</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.inspire.date.earliest" name="Jüngstes Datum" type="groovy">
            <cf:input eager="true" maxOccurs="-1" minOccurs="1" name="dates">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:output eager="false" maxOccurs="1" minOccurs="1">
                <cf:binding>java.lang.String</cf:binding>
            </cf:output>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
//import java.text.SimpleDateFormat
//def formatter = new SimpleDateFormat('yyyy-MM-dd')

// all source dates as list
def values = dates.p.values()

if (!values) {
	// no result
	return null
}

// try to convert to date
values = values.collect { value -&gt;
	def result
	//XXX skip instanceof check - instanceof is not supported by Groovy Sandbox
	// and Class.isInstance requires the Groovy restriction to be lifted
	//if (Date.isInstance(value)) {
	//	result = value
	//}
	//TODO also support parsing based on provided pattern?
	if (result == null) {
		// try hale conversion
		result = _.convert(value: value, to: Date)
	}
	if (result == null) {
		result = value as Date
	}
	result
}

// sort dates
values.sort()

// yield last date
values[-1]
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Liefert das jüngste Datum/Zeit aller Eingabedaten.</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.inspire.id.default" name="AdV INSPIRE localId" type="groovy">
            <cf:input eager="true" maxOccurs="-1" minOccurs="1" name="id">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:output eager="false" maxOccurs="1" minOccurs="1">
                <cf:binding>java.lang.String</cf:binding>
            </cf:output>
            <cf:param maxOccurs="1" minOccurs="0" name="collectorName">
                <cf:description>
                    <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">Name eines Kollektors, der verwendet werden soll, um die erzeugten IDs zu sammeln.</core:text>
                </cf:description>
                <cf:display value="Collector name"/>
                <cf:binding>java.lang.String</cf:binding>
            </cf:param>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
// alle Quell-IDs als Liste
def identifiers = id.p.values()

def id

if (identifiers.size() == 1) {
  // verwende Original-ID falls nur eine Quelle
  id = identifiers[0]
}
else {
  // sortieren (TODO spezielle Ordnung benötigt?)
  identifiers = identifiers.sort()

  def identString = identifiers.join()

  id = '_' + _.crypto.sha256(identString)
}

// Ziel-Typ als Präfix
if (true /*_params.useTargetTypePrefix*/) {
  def targetType = _targetType.definition.name.localPart
  if (targetType) {
    if (targetType.endsWith('Type')) {
      targetType = targetType[0..-5]
    }
  
    if (!id.startsWith('_')) {
      id = '_' + id
    }
    id = targetType + id
  }
}

// Falls ein Collector-Name angegeben wurde, IDs in diesem einspeisen

if (_params.collectorName) {
  withTransformationContext {
    def c = _.context.collector(it)
    c[_params.collectorName] &lt;&lt; id
  }
}

id
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
Bestimmung einer INSPIRE localId oder GML id aus Fachkennzeichen oder AAA-ObjektIDs.

Für eine einzige Quell-ID wird diese direkt herangezogen.

Andernfalls wird unter Verwendung des SHA256-Algorithmus ein Hash-Wert aus den sortierten und dann konkatenierten Quell-IDs gebildet und hexadezimal kodiert.

Außerdem wird der Name des Feature-Typs des Ziel-Modells als Präfix vorangestellt. Dabei wird sichergestellt dass der Typ-Name von den weiteren Teilen der ID durch einen Unterstrich getrennt ist.
</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.inspire.identifier" name="AdV INSPIRE identifier (URI)" type="groovy">
            <cf:input eager="true" maxOccurs="-1" minOccurs="1" name="id">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:output eager="false" maxOccurs="1" minOccurs="1">
                <cf:type name="CodeWithAuthorityType" ns="http://www.opengis.net/gml/3.2"/>
            </cf:output>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
// alle Quell-IDs als Liste
def identifiers = id.p.values()

def id

if (identifiers.size() == 1) {
  // verwende Original-ID falls nur eine Quelle
  id = identifiers[0]
}
else {
  // sortieren (TODO spezielle Ordnung benötigt?)
  identifiers = identifiers.sort()

  def identString = identifiers.join()

  id = '_' + _.crypto.sha256(identString)
}

// Ziel-Typ als Präfix
if (true /*_params.useTargetTypePrefix*/) {
  def targetType = _targetType.definition.name.localPart
  if (targetType) {
    if (targetType.endsWith('Type')) {
      targetType = targetType[0..-5]
    }
  
    if (!id.startsWith('_')) {
      id = '_' + id
    }
    id = targetType + id
  }
}

// Verknüpfung mit namespace
def namespace = _project.vars.INSPIRE_NAMESPACE
if (namespace) {
  if (!namespace.endsWith('/')) {
    namespace = namespace + '/'
  }
  
  // namespace und id als Ergebnis
  _target(namespace + id) {
	codeSpace( 'http://inspire.ec.europa.eu/ids' )
  }
}
else {
  // nur id als Ergebnis
  _target(id) {
	codeSpace( 'http://inspire.ec.europa.eu/ids' )
  }
}
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
Bestimmung eines GML identifiers URI bestehend INSPIRE namespace und localId aus Fachkennzeichen oder AAA-ObjektIDs.

Für eine einzige Quell-ID wird diese direkt für die localId herangezogen. Andernfalls wird unter Verwendung des SHA256-Algorithmus ein Hash-Wert aus den sortierten und dann konkatenierten Quell-IDs gebildet und hexadezimal kodiert.
Als Präfix wird der localId der Name des Feature-Typs des Ziel-Modells vorangestellt. Dabei wird sichergestellt dass der Typ-Name von den weiteren Teilen der ID durch einen Unterstrich getrennt ist.

Der für Datenanbieter und Datensatz spezifische Namespace muss als Vorgabe (Projekt-Variable) konfiguriert werden.

Der `codeSpace` für den GML identifier wird als `http://inspire.ec.europa.eu/ids` gesetzt.
</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.inspire.namespace" name="AdV INSPIRE ID namespace" type="groovy">
            <cf:output eager="false" maxOccurs="1" minOccurs="1">
                <cf:binding>java.lang.String</cf:binding>
            </cf:output>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
// verwende Wert aus Projekt-Variable "INSPIRE_NAMESPACE"
_project.vars.INSPIRE_NAMESPACE
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
Setzt $_target auf den für den Datensatz vorgegebenen festen INSPIRE Namespace.

Der für Datenanbieter und Datensatz spezifische Namespace muss dafür als Vorgabe (Projekt-Variable) konfiguriert werden.
</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <customFunction>
        <cf:custom-property-function xmlns:cf="http://www.esdi-humboldt.eu/hale/custom-function" identifier="adv.uom.toucum" name="AdV Maßeinheit zu UCUM" type="groovy">
            <cf:input eager="false" maxOccurs="1" minOccurs="1" name="uom">
                <cf:binding>java.lang.String</cf:binding>
            </cf:input>
            <cf:output eager="false" maxOccurs="1" minOccurs="1">
                <cf:binding>java.lang.String</cf:binding>
            </cf:output>
            <cf:definition>
                <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
if (!uom) {
	throw new NoResultException()
}

def result

// Mapping auf UCUM
switch(uom) {
case 'urn:adv:uom:m2':
	result = 'm2'
	break
case 'urn:adv:uom:m':
	result = 'm'
	break
case 'urn:adv:uom:km':
	result = 'km'
	break
}

if (!result) {
	// Transformations-Warnung falls kein Mapping auf UCUM vorhanden
	_log.warn("Unknown UCUM representation for unit of measurment $uom, using code as-is")
	result = uom
}

result
</core:text>
            </cf:definition>
            <cf:explanation>
                <cf:locale country="" language="" variant="">
                    <cf:template>
                        <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
Abbildung von Maßeinheiten aus AdV URNs nach UCUM

*Keine vollständige Abbildung, muss ggf. ergänzt werden.*

Aktuell ist folgende Abbildung umgesetzt:

- `urn:adv:uom:m2` zu `m2`
- `urn:adv:uom:m`zu `m`

</core:text>
                    </cf:template>
                </cf:locale>
            </cf:explanation>
        </cf:custom-property-function>
    </customFunction>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.create" id="C67d8bf39-6e9d-4605-aefc-d8abeb246f75" priority="lowest">
        <target>
            <class>
                <type name="NetworkType" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </class>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def collector&#13;
&#13;
withTransformationContext {&#13;
	collector = _.context.collector(it)&#13;
}&#13;
&#13;
_target {&#13;
	// Verknüpfung zu gesammelten Netzwerk-Elementen&#13;
	collector.network.each { id -&gt;;&#13;
		elements {&#13;
			href( "#$id" )&#13;
		}&#13;
	}&#13;
}
</core:text>
        </complexParameter>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C60e1f079-e706-4198-85bc-7ba947ec92e0" priority="normal">
        <target>
            <property>
                <type name="NetworkType" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="{{project:NETWORK_ID}}" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.join" id="C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source name="types">
            <class>
                <type name="ax_wasserlauf" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <complexParameter name="join">
            <jp:join-parameter xmlns:jp="http://www.esdi-humboldt.eu/hale/join">
                <class>
                    <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">NOT (funktion = '8300')</condition>
                    </type>
                </class>
                <class>
                    <type name="ax_wasserlauf" ns="jdbc:postgresql:testbed:public"/>
                </class>
                <jp:condition>
                    <property>
                        <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">NOT (funktion = '8300')</condition>
                        </type>
                        <child name="istteilvon"/>
                    </property>
                    <property>
                        <type name="ax_wasserlauf" ns="jdbc:postgresql:testbed:public"/>
                        <child name="gml_id"/>
                    </property>
                </jp:condition>
            </jp:join-parameter>
        </complexParameter>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.join" id="C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source name="types">
            <class>
                <type name="ax_kanal" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <complexParameter name="join">
            <jp:join-parameter xmlns:jp="http://www.esdi-humboldt.eu/hale/join">
                <class>
                    <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">funktion = '8300'</condition>
                    </type>
                </class>
                <class>
                    <type name="ax_kanal" ns="jdbc:postgresql:testbed:public"/>
                </class>
                <jp:condition>
                    <property>
                        <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">funktion = '8300'</condition>
                        </type>
                        <child name="istteilvon"/>
                    </property>
                    <property>
                        <type name="ax_kanal" ns="jdbc:postgresql:testbed:public"/>
                        <child name="gml_id"/>
                    </property>
                </jp:condition>
            </jp:join-parameter>
        </complexParameter>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.retype" id="Cc4d2bf71-d9f7-4089-84fc-80ac610248a1" priority="normal">
        <source>
            <class>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.retype" id="Ce45298d6-bb21-48c2-9f44-91b32411e0d0" priority="normal">
        <source>
            <class>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C0c7a1560-07b7-497c-a0ea-9c6fad6bf459_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="beginnt"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C0c7a1560-07b7-497c-a0ea-9c6fad6bf459_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="beginnt"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C98bc7f41-5f2a-4b8d-878d-f4576b4f4e17" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="beginnt"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C8c332ab4-2fe1-445d-be6a-ad09a87e49e4" priority="normal">
        <source>
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="beginnt"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="custom:alignment:adv.geometry.simplefeature" id="C32e99886-76cc-4140-baac-1bd195a851ef_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source name="geometrie">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="centrelineGeometry" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.geometry.simplefeature" id="C32e99886-76cc-4140-baac-1bd195a851ef_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source name="geometrie">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="centrelineGeometry" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.geometry.simplefeature" id="C492c3831-f97d-4d49-ac60-7beb6b6d245e" priority="normal">
        <source name="geometrie">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="centrelineGeometry" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.geometry.simplefeature" id="Cd6c38161-1207-4cd6-ac79-b0e8c07a941a" priority="normal">
        <source name="geometrie">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="centrelineGeometry" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="Cde4b9411-60d4-4cb4-b200-f7549b88df60_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="endet"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="endLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="Cde4b9411-60d4-4cb4-b200-f7549b88df60_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="endet"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="endLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="Cb91972dd-fc22-488d-8b0f-3918f77a7c79" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="endet"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="endLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C36280dbe-c3ca-49a4-869c-74601e29cdf1" priority="normal">
        <source>
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="endet"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="endLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C457401dd-ec1f-4ee7-984f-c50c73c9a8c0" priority="lowest">
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="fictitious" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.classification" id="C47b0e8c9-47e7-43ec-80db-e76d1c4bc615" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="artdergewaesserstationierungsachse"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="fictitious" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <complexParameter name="lookupTable">
            <lookup-table xmlns:ns2="http://www.esdi-humboldt.eu/hale/alignment" xmlns="">
                <entry>
                    <key value="3001"/>
                    <value value="true"/>
                </entry>
                <entry>
                    <key value="3002"/>
                    <value value="true"/>
                </entry>
            </lookup-table>
        </complexParameter>
        <parameter value="fixed:false" name="notClassifiedAction"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.classification" id="C9fa88231-373a-462b-9bdf-64c2bad25eeb_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="fliessrichtung"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="flowDirection" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <complexParameter name="lookupTable">
            <lookup-table xmlns:ns2="http://www.esdi-humboldt.eu/hale/alignment" xmlns="">
                <entry>
                    <key value="true"/>
                    <value value="http://inspire.ec.europa.eu/codelist/LinkDirectionValue/inDirection"/>
                </entry>
            </lookup-table>
        </complexParameter>
        <parameter value="null" name="notClassifiedAction"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.classification" id="C9fa88231-373a-462b-9bdf-64c2bad25eeb_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="fliessrichtung"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="flowDirection" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <complexParameter name="lookupTable">
            <lookup-table xmlns:ns2="http://www.esdi-humboldt.eu/hale/alignment" xmlns="">
                <entry>
                    <key value="true"/>
                    <value value="http://inspire.ec.europa.eu/codelist/LinkDirectionValue/inDirection"/>
                </entry>
            </lookup-table>
        </complexParameter>
        <parameter value="null" name="notClassifiedAction"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.classification" id="C5a37708c-333d-4276-8f1f-8326af62a576" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="fliessrichtung"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="flowDirection" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <complexParameter name="lookupTable">
            <lookup-table xmlns:ns2="http://www.esdi-humboldt.eu/hale/alignment" xmlns="">
                <entry>
                    <key value="true"/>
                    <value value="http://inspire.ec.europa.eu/codelist/LinkDirectionValue/inDirection"/>
                </entry>
            </lookup-table>
        </complexParameter>
        <parameter value="null" name="notClassifiedAction"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.classification" id="C8f9655a7-9899-434d-beb1-8de3788ed601" priority="normal">
        <source>
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="fliessrichtung"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="flowDirection" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <complexParameter name="lookupTable">
            <lookup-table xmlns:ns2="http://www.esdi-humboldt.eu/hale/alignment" xmlns="">
                <entry>
                    <key value="true"/>
                    <value value="http://inspire.ec.europa.eu/codelist/LinkDirectionValue/inDirection"/>
                </entry>
            </lookup-table>
        </complexParameter>
        <parameter value="null" name="notClassifiedAction"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign" id="C863128d2-fb28-4d47-ac92-85dfb42d0c60" priority="lowest">
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="flowDirection" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="nilReason"/>
            </property>
        </target>
        <parameter value="unknown" name="value"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="Ce3cc8696-e7b1-4231-ac7a-201fdf247ecc" priority="normal">
        <source name="spelling">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="zweitname"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0">
                    <context>0</context>
                </child>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
        <parameter value="other" name="nameStatus"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C86f39286-d581-4d2b-a3a0-5e619cc766ea" priority="normal">
        <source name="spelling">
            <property>
                <type name="ax_kanal" ns="jdbc:postgresql:testbed:public"/>
                <child name="zweitname"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0">
                    <context>0</context>
                </child>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
        <parameter value="other" name="nameStatus"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C71676b63-a9dc-4ad2-800b-aaa43b690ae9" priority="normal">
        <source name="spelling">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="zweitname"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0">
                    <context>0</context>
                </child>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
        <parameter value="other" name="nameStatus"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C122cb93f-90e4-46dc-b908-65f257665de5" priority="normal">
        <source name="spelling">
            <property>
                <type name="ax_wasserlauf" ns="jdbc:postgresql:testbed:public"/>
                <child name="zweitname"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0">
                    <context>0</context>
                </child>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
        <parameter value="other" name="nameStatus"/>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.greedy" id="Cccbced66-91c7-4522-88f3-aa22fd17802a" priority="normal">
        <source name="var">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="regionalsprache"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0">
                    <context>1</context>
                </child>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
if (regionalsprache) {&#13;
	regionalsprache.p.each { reg -&gt;&#13;
		_target {&#13;
			GeographicalName {&#13;
				sourceOfName {&#13;
					nilReason( 'other:unpopulated' )&#13;
				}&#13;
				spelling {&#13;
					SpellingOfName {&#13;
						text( reg )&#13;
						script( 'Latn' )&#13;
					}&#13;
				}&#13;
				pronunciation {&#13;
					nilReason( 'other:unpopulated' )&#13;
				}&#13;
				language {&#13;
					nilReason( 'unknown' )&#13;
				}&#13;
				nameStatus {&#13;
					href( 'http://inspire.ec.europa.eu/codelist/NameStatusValue/other' )&#13;
				}&#13;
				nativeness {&#13;
					href( 'http://inspire.ec.europa.eu/codelist/NativenessValue/endonym' )&#13;
				}&#13;
			}&#13;
		}&#13;
	}&#13;
}
</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.greedy" id="C267327b8-dc05-4cab-8554-25ef925910fe" priority="normal">
        <source name="var">
            <property>
                <type name="ax_kanal" ns="jdbc:postgresql:testbed:public"/>
                <child name="regionalsprache"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0">
                    <context>1</context>
                </child>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
if (regionalsprache) {&#13;
	regionalsprache.p.each { reg -&gt;&#13;
		_target {&#13;
			GeographicalName {&#13;
				sourceOfName {&#13;
					nilReason( 'other:unpopulated' )&#13;
				}&#13;
				spelling {&#13;
					SpellingOfName {&#13;
						text( reg )&#13;
						script( 'Latn' )&#13;
					}&#13;
				}&#13;
				pronunciation {&#13;
					nilReason( 'other:unpopulated' )&#13;
				}&#13;
				language {&#13;
					nilReason( 'unknown' )&#13;
				}&#13;
				nameStatus {&#13;
					href( 'http://inspire.ec.europa.eu/codelist/NameStatusValue/other' )&#13;
				}&#13;
				nativeness {&#13;
					href( 'http://inspire.ec.europa.eu/codelist/NativenessValue/endonym' )&#13;
				}&#13;
			}&#13;
		}&#13;
	}&#13;
}
</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.greedy" id="C7ea8ce26-1461-4062-a6c1-2cd5e4d4b19a" priority="normal">
        <source name="var">
            <property>
                <type name="ax_wasserlauf" ns="jdbc:postgresql:testbed:public"/>
                <child name="regionalsprache"/>
            </property>
        </source>
        <target name="result">
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0">
                    <context>1</context>
                </child>
            </property>
        </target>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
if (regionalsprache) {&#13;
	regionalsprache.p.each { reg -&gt;&#13;
		_target {&#13;
			GeographicalName {&#13;
				sourceOfName {&#13;
					nilReason( 'other:unpopulated' )&#13;
				}&#13;
				spelling {&#13;
					SpellingOfName {&#13;
						text( reg )&#13;
						script( 'Latn' )&#13;
					}&#13;
				}&#13;
				pronunciation {&#13;
					nilReason( 'other:unpopulated' )&#13;
				}&#13;
				language {&#13;
					nilReason( 'unknown' )&#13;
				}&#13;
				nameStatus {&#13;
					href( 'http://inspire.ec.europa.eu/codelist/NameStatusValue/other' )&#13;
				}&#13;
				nativeness {&#13;
					href( 'http://inspire.ec.europa.eu/codelist/NativenessValue/endonym' )&#13;
				}&#13;
			}&#13;
		}&#13;
	}&#13;
}
</core:text>
        </complexParameter>
        <parameter value="false" name="variablesAsInstances"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C16ffcf76-ef69-4be7-9ae0-82a786e774c8" priority="normal">
        <source name="spelling">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="name"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
        <parameter value="official" name="nameStatus"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C101f23ad-7a7f-4b77-a555-48704b165288" priority="normal">
        <source name="spelling">
            <property>
                <type name="ax_kanal" ns="jdbc:postgresql:testbed:public"/>
                <child name="name"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
        <parameter value="official" name="nameStatus"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C08c61bda-a3b3-4666-b590-9983166ed010" priority="normal">
        <source name="spelling">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="name"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
        <parameter value="official" name="nameStatus"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.GeographicalName.simple" id="C7f4b3d7e-4c85-4754-b571-ece32a50c67f" priority="normal">
        <source name="spelling">
            <property>
                <type name="ax_wasserlauf" ns="jdbc:postgresql:testbed:public"/>
                <child name="name"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="geographicalName" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="GeographicalName" ns="http://inspire.ec.europa.eu/schemas/gn/4.0"/>
            </property>
        </target>
        <parameter value="official" name="nameStatus"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="C1f0af287-eddd-4251-b6ac-e06cc7e18b89" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="gewaesserkennzahl"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="hydroId" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="HydroIdentifier" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Cc0fe6041-233e-4a8c-b915-fe848f575f68" priority="normal">
        <source name="id">
            <property>
                <type name="ax_kanal" ns="jdbc:postgresql:testbed:public"/>
                <child name="gewaesserkennzahl"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="hydroId" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="HydroIdentifier" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Cf52153cf-22ff-4166-93dd-997d3a7876f3" priority="normal">
        <source name="id">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="gewaesserkennzahl"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="hydroId" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="HydroIdentifier" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Ca5921261-7884-431f-ae4d-d5e46a49c9e7" priority="normal">
        <source name="id">
            <property>
                <type name="ax_wasserlauf" ns="jdbc:postgresql:testbed:public"/>
                <child name="gewaesserkennzahl"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="hydroId" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="HydroIdentifier" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="C8eaa42ed-88ad-4cb5-9560-43dddd8c6992" priority="normal">
        <source name="anchor">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="gewaesserkennzahl"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="hydroId" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="HydroIdentifier" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
                <child name="namespace" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
            </property>
        </target>
        <parameter value="{{project:INSPIRE_NAMESPACE}}" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="C4529cd62-3c9f-4b97-bc3a-ed72da5d09d2" priority="normal">
        <source name="anchor">
            <property>
                <type name="ax_kanal" ns="jdbc:postgresql:testbed:public"/>
                <child name="gewaesserkennzahl"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="hydroId" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="HydroIdentifier" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
                <child name="namespace" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
            </property>
        </target>
        <parameter value="{{project:INSPIRE_NAMESPACE}}" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="Ce61e7d4d-47b3-4e89-b984-0a46e8b04ab7" priority="normal">
        <source name="anchor">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="gewaesserkennzahl"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="hydroId" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="HydroIdentifier" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
                <child name="namespace" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
            </property>
        </target>
        <parameter value="{{project:INSPIRE_NAMESPACE}}" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="C13e156bd-9301-42ba-ad04-3144cdc2e9ce" priority="normal">
        <source name="anchor">
            <property>
                <type name="ax_wasserlauf" ns="jdbc:postgresql:testbed:public"/>
                <child name="gewaesserkennzahl"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="hydroId" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="HydroIdentifier" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
                <child name="namespace" ns="http://inspire.ec.europa.eu/schemas/hy/4.0"/>
            </property>
        </target>
        <parameter value="{{project:INSPIRE_NAMESPACE}}" name="value"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="C9abf2351-2518-44d0-8926-cb8caf880963_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="network" name="collectorName"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="C9abf2351-2518-44d0-8926-cb8caf880963_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="network" name="collectorName"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Ca9d3b9b7-8ef8-4abb-93cf-0f4bdf32defa" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="network" name="collectorName"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="C4fe88ad1-3baa-48b4-ac03-a0490bb5f871" priority="normal">
        <source name="id">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="network" name="collectorName"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.identifier" id="C670559fc-a9d4-4fcb-a456-32fc671c071c_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="identifier" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.identifier" id="C670559fc-a9d4-4fcb-a456-32fc671c071c_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="identifier" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.identifier" id="C9892986c-a82d-4d20-80b9-bbd0d408055c" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="identifier" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.identifier" id="C50e93e5d-c134-4d5e-97e4-9615c913a454" priority="normal">
        <source name="id">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="identifier" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="C55538203-dd9d-41f9-b453-d036082feada_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inNetwork" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="#{{project:NETWORK_ID}}" name="pattern"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Ca0d6577b-2581-49cd-87d8-8f235e6ce242_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Ca0d6577b-2581-49cd-87d8-8f235e6ce242_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Cffb35322-9f3a-467d-ade2-16a021dda2c8" priority="normal">
        <source name="id">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="C4018e6bb-8c8e-4931-927e-ea83f3708f8c" priority="normal">
        <source name="id">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
    </cell>
    <cell relation="custom:alignment:adv.inspire.namespace" id="C3cf05bdc-15bc-4540-95d0-4a87b84eb9df_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="namespace" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.geometric.calculatelength" id="C7c8926c6-296b-4339-8f52-319848398955_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="length" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.geometric.calculatelength" id="C7c8926c6-296b-4339-8f52-319848398955_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="length" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.geometric.calculatelength" id="C2881ff0f-c31d-48f1-98e8-d828319a654c" priority="normal">
        <source>
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="length" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.geometric.calculatelength" id="Cf2ed3575-612d-4481-8ea5-db66d5cfb83c" priority="normal">
        <source>
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="length" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </property>
        </target>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="Cb034ce5f-93a2-4153-be13-0142edd7e94d_C5030a27e-9231-41f2-b351-e3972d38c52e" priority="normal">
        <source name="anchor">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">NOT (funktion = '8300')</condition>
                </type>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="length" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="uom"/>
            </property>
        </target>
        <parameter value="m" name="value"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="Cb034ce5f-93a2-4153-be13-0142edd7e94d_C28f30088-0b5f-4fa4-9aa0-d270e6b6bcfc" priority="normal">
        <source name="anchor">
            <property>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">funktion = '8300'</condition>
                </type>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="length" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="uom"/>
            </property>
        </target>
        <parameter value="m" name="value"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="C67bc8977-3a7d-4a0c-baa1-1e77beda7092" priority="normal">
        <source name="anchor">
            <property>
                <type name="ax_gewaesserstationierungsachse" ns="jdbc:postgresql:testbed:public"/>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="length" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="uom"/>
            </property>
        </target>
        <parameter value="m" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.assign.bound" id="Ceaf3f99b-6e40-4601-9e76-f435adecaf62" priority="normal">
        <source name="anchor">
            <property>
                <type name="ax_sickerstrecke" ns="jdbc:postgresql:testbed:public"/>
                <child name="wkb_geometry"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseLinkType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="length" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="uom"/>
            </property>
        </target>
        <parameter value="m" name="value"/>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.join" id="Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="highest">
        <source name="types">
            <class>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <complexParameter name="join">
            <jp:join-parameter xmlns:jp="http://www.esdi-humboldt.eu/hale/join">
                <class>
                    <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
                </class>
                <class>
                    <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                    </type>
                </class>
                <class>
                    <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                    </type>
                </class>
                <jp:condition>
                    <property>
                        <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
                        <child name="hatdirektunten"/>
                    </property>
                    <property>
                        <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                        </type>
                        <child name="gml_id"/>
                    </property>
                </jp:condition>
                <jp:condition>
                    <property>
                        <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
                        <child name="hatdirektunten"/>
                    </property>
                    <property>
                        <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                        </type>
                        <child name="gml_id"/>
                    </property>
                </jp:condition>
            </jp:join-parameter>
        </complexParameter>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
//Alle Fliessgewässer identifizieren, die auf Brücken oder Dükern sind und Paare sammeln&#13;
//Kollektor hat Brücken/Düker-id als key und Fliessgewässer-id als Wert&#13;
def c = _.context.collector()&#13;
&#13;
if (_source.links.ax_bauwerkimverkehrsbereich.first()){&#13;
	c.crossing[_source.links.ax_bauwerkimverkehrsbereich.p.gml_id.value()] &lt;&lt; _source.p.gml_id.value()&#13;
}&#13;
&#13;
if (_source.links.ax_bauwerkimgewaesserbereich.first()){&#13;
	c.crossing[_source.links.ax_bauwerkimgewaesserbereich.p.gml_id.value()] &lt;&lt; _source.p.gml_id.value()&#13;
}&#13;
&#13;
//an dieser Stelle wird keine Ziel-Instanz erzeugt, sondern lediglich Wasserläufe und Brücken/Düker gesammelt, bei denen der Wasserlauf über der Brücke/dem Düker liegt&#13;
//diese Information wird in den Groovy Retype.Funktionen mit niedrigerer Priorität genutzt, um WatercourseSeparatedCrossings zu erzeugen.
</core:text>
        </complexParameter>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.join" id="C13a28068-b2af-407e-91c2-780ee4fa28f2" priority="higher">
        <source name="types">
            <class>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <complexParameter name="join">
            <jp:join-parameter xmlns:jp="http://www.esdi-humboldt.eu/hale/join">
                <class>
                    <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
                </class>
                <class>
                    <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                    </type>
                </class>
                <class>
                    <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                    </type>
                </class>
                <jp:condition>
                    <property>
                        <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
                        <child name="hatdirektunten"/>
                    </property>
                    <property>
                        <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                        </type>
                        <child name="gml_id"/>
                    </property>
                </jp:condition>
                <jp:condition>
                    <property>
                        <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
                        <child name="hatdirektunten"/>
                    </property>
                    <property>
                        <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                        </type>
                        <child name="gml_id"/>
                    </property>
                </jp:condition>
            </jp:join-parameter>
        </complexParameter>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
//Alle Gewässerachsen identifizieren, die auf Brücken oder Dükern sind und Paare sammeln&#13;
//Kollektor hat Brücken/Düker-id als key und Gewässerachsen-id als Wert&#13;
def c = _.context.collector()&#13;
&#13;
if (_source.links.ax_bauwerkimverkehrsbereich.first()){&#13;
	c.crossing[_source.links.ax_bauwerkimverkehrsbereich.p.gml_id.value()] &lt;&lt; _source.p.gml_id.value()&#13;
}&#13;
&#13;
if (_source.links.ax_bauwerkimgewaesserbereich.first()){&#13;
	c.crossing[_source.links.ax_bauwerkimgewaesserbereich.p.gml_id.value()] &lt;&lt; _source.p.gml_id.value()&#13;
}&#13;
&#13;
//an dieser Stelle wird keine Ziel-Instanz erzeugt, sondern lediglich Wasserläufe und Brücken/Düker gesammelt, bei denen der Wasserlauf über der Brücke/dem Düker liegt&#13;
//diese Information wird in den Groovy Retype.Funktionen mit niedrigerer Priorität genutzt, um WatercourseSeparatedCrossings zu erzeugen.
</core:text>
        </complexParameter>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.join" id="C0770ce5a-e56e-4e98-ab1c-d7802faf4907" priority="normal">
        <source name="types">
            <class>
                <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <complexParameter name="join">
            <jp:join-parameter xmlns:jp="http://www.esdi-humboldt.eu/hale/join">
                <class>
                    <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                    </type>
                </class>
                <class>
                    <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
                </class>
                <jp:condition>
                    <property>
                        <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                        </type>
                        <child name="gml_id"/>
                    </property>
                    <property>
                        <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
                        <child name="hatdirektunten"/>
                    </property>
                </jp:condition>
            </jp:join-parameter>
        </complexParameter>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def c = _.context.collector()&#13;
&#13;
def obereGewaesserAchseIDs = c.crossing[_source.p.gml_id.value()].values()&#13;
&#13;
if (obereGewaesserAchseIDs) {&#13;
	obereGewaesserAchseIDs.each{ obereGewaesserAchseID -&gt;&#13;
		_source.links.ax_fliessgewaesser.p.gml_id.each { fliessgewaesserID -&gt;&#13;
			fliessgewaesserID = 'WatercourseLink_' + fliessgewaesserID&#13;
			_target {&#13;
			//https://inspire.ec.europa.eu/data-model/approved/r4618-ir/html/EARoot/EA3/EA1/EA5/EA9018.htm: "The order reflects their elevation; the first link is the lower link. "&#13;
				element {&#13;
					//unteres Fliessgewaesser&#13;
					href( "#$fliessgewaesserID" )&#13;
					}&#13;
				element {&#13;
					// obere Gewaesserachse/Fliessgewaesser&#13;
					href( "#WatercourseLink_$obereGewaesserAchseID" )&#13;
				}&#13;
			}&#13;
		}&#13;
	}&#13;
}
</core:text>
        </complexParameter>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.join" id="C3138ace2-ae86-4835-b110-f39ead4202a0" priority="normal">
        <source name="types">
            <class>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <complexParameter name="join">
            <jp:join-parameter xmlns:jp="http://www.esdi-humboldt.eu/hale/join">
                <class>
                    <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                    </type>
                </class>
                <class>
                    <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
                </class>
                <jp:condition>
                    <property>
                        <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                        </type>
                        <child name="gml_id"/>
                    </property>
                    <property>
                        <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
                        <child name="hatdirektunten"/>
                    </property>
                </jp:condition>
            </jp:join-parameter>
        </complexParameter>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
def c = _.context.collector()&#13;
&#13;
def obereGewaesserAchseIDs = c.crossing[_source.p.gml_id.value()].values()&#13;
&#13;
if(obereGewaesserAchseIDs){&#13;
	obereGewaesserAchseIDs.each{ obereGewaesserAchseID -&gt;&#13;
		_source.links.ax_gewaesserachse.p.gml_id.each { gewaesserachseID -&gt;&#13;
			gewaesserachseID = 'WatercourseLink_' + gewaesserachseID&#13;
			_target {&#13;
			//https://inspire.ec.europa.eu/data-model/approved/r4618-ir/html/EARoot/EA3/EA1/EA5/EA9018.htm: "The order reflects their elevation; the first link is the lower link. "&#13;
				element {&#13;
					//unteres Fliessgewaesser&#13;
					href( "#$gewaesserachseID" )&#13;
					}&#13;
				element {&#13;
					// obere Gewaesserachse/Fliessgewaesser&#13;
					href( "#WatercourseLink_$obereGewaesserAchseID" )&#13;
				}&#13;
			}&#13;
		}&#13;
	}&#13;
}
</core:text>
        </complexParameter>
        <documentation>Mittels der Relation`hatDirektUnten` wird ermittelt, ob es Gewässerachsen gibt, die von einem Düker unterquert werden. Ist dies der Fall, wird ein `WatercourseSeparatedCrossing` erstellt.</documentation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.join" id="C17077e21-db6b-43a0-b1a4-8e1a68dc9e25" priority="normal">
        <source name="types">
            <class>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <complexParameter name="join">
            <jp:join-parameter xmlns:jp="http://www.esdi-humboldt.eu/hale/join">
                <class>
                    <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                    </type>
                </class>
                <class>
                    <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
                </class>
                <jp:condition>
                    <property>
                        <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                        </type>
                        <child name="hatdirektunten"/>
                    </property>
                    <property>
                        <type name="ax_fliessgewaesser" ns="jdbc:postgresql:testbed:public"/>
                        <child name="gml_id"/>
                    </property>
                </jp:condition>
            </jp:join-parameter>
        </complexParameter>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
//nur Brücken betrachten, die im Kollektor sind, weil sie einen Wasserlauf oder ein Fließgewässer über sich haben&#13;
&#13;
def c = _.context.collector()&#13;
&#13;
def obereGewaesserAchseIDs = c.crossing[_source.p.gml_id.value()].values()&#13;
&#13;
if(obereGewaesserAchseIDs){&#13;
	obereGewaesserAchseIDs.each{ obereGewaesserAchseID -&gt;&#13;
		_source.links.ax_fliessgewaesser.p.gml_id.each { fliessgewaesserID -&gt;&#13;
			fliessgewaesserID = 'WatercourseLink_' + fliessgewaesserID&#13;
			_target {&#13;
			//https://inspire.ec.europa.eu/data-model/approved/r4618-ir/html/EARoot/EA3/EA1/EA5/EA9018.htm: "The order reflects their elevation; the first link is the lower link. "&#13;
				element {&#13;
					//unteres Fliessgewaesser&#13;
					href( "#$fliessgewaesserID" )&#13;
					}&#13;
				element {&#13;
					// obere Gewaesserachse/Fliessgewaesser&#13;
					href( "#WatercourseLink_$obereGewaesserAchseID" )&#13;
				}&#13;
			}&#13;
		}&#13;
	}&#13;
}
</core:text>
        </complexParameter>
        <documentation>Mittels der Relation`hatDirektUnten` wird ermittelt, ob es Fliessgewässer gibt, die von einer Brücke überquert werden. Ist dies der Fall, wird ein `WatercourseSeparatedCrossing` erstellt.</documentation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.cst.functions.groovy.join" id="C34e7e1a9-d45a-4579-a5aa-53b2958a02e5" priority="normal">
        <source name="types">
            <class>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
            </class>
        </source>
        <source name="types">
            <class>
                <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
            </class>
        </source>
        <target>
            <class>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
            </class>
        </target>
        <complexParameter name="join">
            <jp:join-parameter xmlns:jp="http://www.esdi-humboldt.eu/hale/join">
                <class>
                    <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                        <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                    </type>
                </class>
                <class>
                    <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
                </class>
                <jp:condition>
                    <property>
                        <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                            <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                        </type>
                        <child name="hatdirektunten"/>
                    </property>
                    <property>
                        <type name="ax_gewaesserachse" ns="jdbc:postgresql:testbed:public"/>
                        <child name="gml_id"/>
                    </property>
                </jp:condition>
            </jp:join-parameter>
        </complexParameter>
        <complexParameter name="script">
            <core:text xmlns:core="http://www.esdi-humboldt.eu/hale/core" xml:space="preserve">
//nur Brücken betrachten, die im Kollektor sind, weil sie einen Wasserlauf oder ein Fließgewässer über sich haben&#13;
&#13;
def c = _.context.collector()&#13;
&#13;
def obereGewaesserAchseIDs = c.crossing[_source.p.gml_id.value()].values()&#13;
&#13;
if(obereGewaesserAchseIDs){&#13;
	obereGewaesserAchseIDs.each{ obereGewaesserAchseID -&gt;&#13;
		_source.links.ax_gewaesserachse.p.gml_id.each { gewaesserachseID -&gt;&#13;
			gewaesserAchseID = 'WatercourseLink_' + gewaesserAchseID&#13;
			_target {&#13;
			//https://inspire.ec.europa.eu/data-model/approved/r4618-ir/html/EARoot/EA3/EA1/EA5/EA9018.htm: "The order reflects their elevation; the first link is the lower link. "&#13;
				element {&#13;
					//untere Gewaesserachse&#13;
					href( "#$gewaesserAchseID" )&#13;
					}&#13;
				element {&#13;
					// obere Gewaesserachse/Fliessgewaesser&#13;
					href( "#WatercourseLink_$obereGewaesserAchseID" )&#13;
				}&#13;
			}&#13;
		}&#13;
	}&#13;
}
</core:text>
        </complexParameter>
        <documentation>Mittels der Relation`hatDirektUnten` wird ermittelt, ob es Gewässerachsen gibt, die von einer Brücke überquert werden. Ist dies der Fall, wird ein `WatercourseSeparatedCrossing` erstellt.</documentation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">The cell's source entities have been replaced, the new entities may have a different structure and/or names and may require updating the Groovy script accordingly</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C2bd85216-4863-4563-954d-31c8e95e7490_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source>
            <property>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
                <child name="beginnt"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C8bfb7a01-ae8a-42b9-9f2c-fb708d5b7918_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source>
            <property>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
                <child name="beginnt"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="beginLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="Cf0510852-3541-4662-ae7f-e275be6973f7_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source>
            <property>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
                <child name="endet"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="endLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.rename" id="C6d7d8ef1-4c16-4fb6-a635-7355ccafcae6_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source>
            <property>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
                <child name="endet"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="endLifespanVersion" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
            </property>
        </target>
        <parameter value="false" name="ignoreNamespaces"/>
        <parameter value="false" name="structuralRename"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Ca19f26cc-d722-4574-9217-23c1da508d5e_C0770ce5a-e56e-4e98-ab1c-d7802faf4907" priority="normal">
        <source name="id">
            <property>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="network" name="collectorName"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="C136eff7d-1e18-46b1-b96e-76f77ce9f584_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source name="id">
            <property>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="id" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <parameter value="network" name="collectorName"/>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.identifier" id="Cffa73abc-d9fd-483a-ad19-5beca3a5e2b6_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source name="id">
            <property>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="identifier" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.identifier" id="C37922be7-144a-4018-8f73-def91c4788b4_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source name="id">
            <property>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="identifier" ns="http://www.opengis.net/gml/3.2"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="eu.esdihumboldt.hale.align.formattedstring" id="C55538203-dd9d-41f9-b453-d036082feada_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inNetwork" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="href" ns="http://www.w3.org/1999/xlink"/>
            </property>
        </target>
        <parameter value="#{{project:NETWORK_ID}}" name="pattern"/>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Cc56c5410-b9cc-47d8-852b-1ca0a5b8adda_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source name="id">
            <property>
                <type name="ax_bauwerkimgewaesserbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '2012'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.id.default" id="Cba9bc971-ba94-4dfa-89b3-5edd2a77adfc_Cd25b8ffb-1b4a-4fbc-b480-57faf3462979" priority="normal">
        <source name="id">
            <property>
                <type name="ax_bauwerkimverkehrsbereich" ns="jdbc:postgresql:testbed:public">
                    <condition lang="CQL">bauwerksfunktion = '1800'</condition>
                </type>
                <child name="gml_id"/>
            </property>
        </source>
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="localId" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
        <annotation type="message">
            <core:message xmlns:core="http://www.esdi-humboldt.eu/hale/core" category="migration" dismissed="true">
                <core:content>
                    <core:text xml:space="preserve">Filter condition may not be valid because the entity it is applied to has been replaced</core:text>
                </core:content>
            </core:message>
        </annotation>
    </cell>
    <cell relation="custom:alignment:adv.inspire.namespace" id="C12eaf7f7-c51d-4b2c-9650-a6e2491830d3" priority="normal">
        <target>
            <property>
                <type name="WatercourseSeparatedCrossingType" ns="http://inspire.ec.europa.eu/schemas/hy-n/4.0"/>
                <child name="inspireId" ns="http://inspire.ec.europa.eu/schemas/net/4.0"/>
                <child name="Identifier" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
                <child name="namespace" ns="http://inspire.ec.europa.eu/schemas/base/3.3"/>
            </property>
        </target>
    </cell>
</alignment>
